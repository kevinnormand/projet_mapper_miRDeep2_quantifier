<tool id="filtrage_resultats_mirdeep2_mature_and_new.fa" name="filtrage resultats mirdeep2 mature_and_new.fa" version="0.1.0">
  <description>filtre le fichier resultat tabular de mirdeep2 et creer mature_and_new.fa</description>
  <command>
	  <![CDATA[
		#if $refHairpin.hairpinSource=="indexed"
			cat $input1 $refHairpin.index > $output
		#end if
		#if $refHairpin.hairpinSource=="history"
			cat $input1 $refHairpin.ownFile > $output
		#end if
	  ]]>
  </command>
  <inputs>
	<param format="fasta" name="input1" type="data" label="predicted_know_miRNA.fa"/>
	
	<conditional name="refHairpin">
		<param name="hairpinSource" type="select" label="hairpin">
			<option value="indexed">Use a built-in index</option>
			<option value="history">Use one from the history</option>
		</param>
		<when value="indexed">
			<param name="index" type="select" label="Select a reference hairpin" help="If your hairpin of interest is not listed, contact your Galaxy admin.">
				<options from_data_table="hairpin" >
					<filter type="sort_by" column="2"/>
						<validator type="no_options" message="No indexes are available for the selected input dataset"/>
				</options>
			</param>
		</when>
		<when value="history">
			<param name="ownFile" type="data" format="fasta" metadata_name="dbkey" label="Select the reference hairpin" />
		</when>
	</conditional>
	
  </inputs>
  <outputs>
	<data format="fasta" name="output" label="sortie_filtrage_mature_and_new.fa"/>
  </outputs>

  <help>
filtre le fichier resultat tabular de mirdeep2 et creer mature_and_new.fa
  </help>

</tool>
